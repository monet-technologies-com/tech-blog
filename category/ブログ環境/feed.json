{
    "version": "https://jsonfeed.org/version/1",
    "title": "MONET Tech-Blog • All posts by \"ブログ環境\" category",
    "description": "This is a tech-blog of MONET-Technologies",
    "home_page_url": "https://monet-technologies-com.github.io/tech-blog",
    "items": [
        {
            "id": "https://monet-technologies-com.github.io/tech-blog/2020/07/15/%E6%8A%80%E8%A1%93%E3%83%96%E3%83%AD%E3%82%B0%E5%A7%8B%E3%82%81%E3%81%BE%E3%81%97%E3%81%9F(VSCode%E3%81%AE%E8%A8%AD%E5%AE%9A%E7%B7%A8)/",
            "url": "https://monet-technologies-com.github.io/tech-blog/2020/07/15/%E6%8A%80%E8%A1%93%E3%83%96%E3%83%AD%E3%82%B0%E5%A7%8B%E3%82%81%E3%81%BE%E3%81%97%E3%81%9F(VSCode%E3%81%AE%E8%A8%AD%E5%AE%9A%E7%B7%A8)/",
            "title": "技術ブログ始めました(VSCodeの設定編)",
            "date_published": "2020-07-15T23:31:46.000Z",
            "content_html": "<h1 id=\"はじめに\"><a class=\"markdownIt-Anchor\" href=\"#はじめに\">#</a> はじめに</h1>\n<p>MONET Technologies 株式会社、2020 年新卒入社の竹内です。</p>\n<p>この記事では、技術ブログ開始に当たって、VSCode での Hexo 記事執筆環境を導入した話です。</p>\n<p>全体構成のお話は<a href=\"/tech-blog/2020/07/14/%E6%8A%80%E8%A1%93%E3%83%96%E3%83%AD%E3%82%B0%E5%A7%8B%E3%82%81%E3%81%BE%E3%81%97%E3%81%9F(%E6%A7%8B%E6%88%90%E7%B7%A8)/\" title=\"技術ブログ始めました(構成編)\">技術ブログ始めました(構成編)</a>でお話しています。</p>\n<p>静的サイトジェネレータである Hexo を導入したお話は<a href=\"/tech-blog/2020/07/15/%E6%8A%80%E8%A1%93%E3%83%96%E3%83%AD%E3%82%B0%E5%A7%8B%E3%82%81%E3%81%BE%E3%81%97%E3%81%9F(Hexo-on-Docker%E7%B7%A8)/\" title=\"技術ブログ始めました(Hexo-on-Docker編)\">技術ブログ始めました(Hexo-on-Docker編)</a>でお話しています。</p>\n<h2 id=\"楽な執筆環境に向けて\"><a class=\"markdownIt-Anchor\" href=\"#楽な執筆環境に向けて\">#</a> 楽な執筆環境に向けて</h2>\n<p>技術ブログ、エンジニアの方なら一度は書こうとするものだと思うのですが、3 ヶ月続けられた方には心からの拍手を送りたいです。</p>\n<p>やはり、モノを書く、アウトプットするのってコストが高いんですよね。単なるメモ程度なら雑に書いても良いわけですが、ブログとして書こうとするとある程度体裁を整えないといけなかったり。。。といったことを考えると、筆が重くなり。。。</p>\n<p>そこで今回は、執筆を楽にするためのツール、VSCode 上のエクステンションを紹介してみます。</p>\n<h2 id=\"vscode-hexo-utils\"><a class=\"markdownIt-Anchor\" href=\"#vscode-hexo-utils\">#</a> vscode-hexo-utils</h2>\n<p>Hexo+VSCode で執筆する際には必須のエクステンションです。<br>\nこの<a href=\"https://marketplace.visualstudio.com/items?itemName=fantasy.vscode-hexo-utils\" target=\"_blank\" rel=\"noopener\"> vscode-hexo-utils</a> を使うと</p>\n<ul>\n<li>記事一覧やタグ一覧を表示するサイドバーの追加</li>\n<li>マークダウンに画像を挿入したプレビュー時、Hexo ならではの画像ディレクトリ構成に対応してプレビューを見せてくれる</li>\n<li>Win:ctrl-alt-v Mac:opt-cmd-v でクリップボードの画像を貼り付け (記事に対応した画像配置用ディレクトリの作成とマークダウン上の参照文記述)</li>\n</ul>\n<p>などなどしてくれるので大分執筆が楽になります。特に画像の挿入は重要なので、開発者には頭が上がりません。</p>\n<h2 id=\"remote-development\"><a class=\"markdownIt-Anchor\" href=\"#remote-development\">#</a> Remote Development</h2>\n<p><a href=\"https://code.visualstudio.com/docs/remote/remote-overview\" target=\"_blank\" rel=\"noopener\">こちら</a>は Docker など、リモートとして作った環境に対して VSCode を接続できるエクステンションです。今回は Docker 上に Hexo や Git を構成しているので、直接接続して、Docker 上のコマンドを呼び出す、なんてことが簡単になります。</p>\n<p>ただ、残念なことが、 <strong>リモートで接続した際にクリップボードが共有化されていないらしく、上記の vscode-hexo-utils の画像コピペ機能が上手く働きません。</strong><br>\nそのため、こちらは残念ながら、執筆中には使えない感じになっています。。。<br>\nもしクリップボードの共有化ができると、</p>\n<ol>\n<li>vscode を直接 Docker に繋げる</li>\n<li>vscode-hexo-utils を使いながら執筆</li>\n<li>直接 Docker 内のコマンドを叩いてデプロイ</li>\n</ol>\n<p>といった使い方ができるようになります。</p>\n<p>もちろん今の Remote Development 機能も大変良いモノで、友人なんかは、RaspberryPi などでリモート環境を作る、VSCode でリモート接続して手元の PC で IoT 開発、なんてこともしているのでおすすめです。</p>\n<h2 id=\"vscodeのタスク機能\"><a class=\"markdownIt-Anchor\" href=\"#vscodeのタスク機能\">#</a> VSCode のタスク機能</h2>\n<p>今回は Docker を通じてのデプロイになりますが、VSCode の方でコマンドを打ってデプロイまで行いたいですよね。<br>\nそこで使うのが、VSCode のタスク機能です。</p>\n<p>参考になるのが<a href=\"https://fereria.github.io/reincarnation_tech/98_Other/VSCode/vscode_create_task/\" target=\"_blank\" rel=\"noopener\">こちら</a>です。</p>\n<p>自分は</p>\n<pre class=\"line-numbers language-language-json\" mdui-tooltip=\"{content: 'language-json'}\"><code class=\"language-language-json\">{\n  \"version\": \"2.0.0\",\n  \"tasks\": [\n    {\n      \"label\": \"deploy-hexo-on-docker\",\n      \"type\": \"shell\",\n      \"command\": \"docker exec -it hexo-domain.com git add . && docker exec -it hexo-domain.com git commit -m 'update ${fileBasenameNoExtension}' && docker exec -it hexo-domain.com git push\"\n    }\n  ]\n}\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>というコマンドを登録して、VSCode から Docker 上の Git を叩き、push するとともにデプロイを行っています。<br>\nこのタスク機能を使えば、任意のコマンドを VSCode 上で使えるので良いですね。</p>\n<h2 id=\"vscode-drawio\"><a class=\"markdownIt-Anchor\" href=\"#vscode-drawio\">#</a> vscode-drawio</h2>\n<p>最後に紹介するエクステンションは、<br>\n<a href=\"https://marketplace.visualstudio.com/items?itemName=hediet.vscode-drawio\" target=\"_blank\" rel=\"noopener\">vscode-drawio</a> です。</p>\n<p>こちらはブラウザ上で動く draw.io を vscode 上で動かそうというモノで、簡単な図を書きたい時に使えます。</p>\n<p>この、なんでもエディタ上にのせてやろうという心意気、自分は嫌いじゃないです。笑</p>\n<h1 id=\"まとめ\"><a class=\"markdownIt-Anchor\" href=\"#まとめ\">#</a> まとめ</h1>\n<p>様々な VSCode のエクステンションがあって、見ていて楽しいです。<br>\nもちろんエンジニアは何を生み出すか、も重要ですが、たまには息抜きに自分の道具を磨いて見るのも良いですね。</p>\n",
            "tags": [
                "hexo",
                "vscode"
            ]
        },
        {
            "id": "https://monet-technologies-com.github.io/tech-blog/2020/07/15/%E6%8A%80%E8%A1%93%E3%83%96%E3%83%AD%E3%82%B0%E5%A7%8B%E3%82%81%E3%81%BE%E3%81%97%E3%81%9F(Hexo-on-Docker%E7%B7%A8)/",
            "url": "https://monet-technologies-com.github.io/tech-blog/2020/07/15/%E6%8A%80%E8%A1%93%E3%83%96%E3%83%AD%E3%82%B0%E5%A7%8B%E3%82%81%E3%81%BE%E3%81%97%E3%81%9F(Hexo-on-Docker%E7%B7%A8)/",
            "title": "技術ブログ始めました(Hexo-on-Docker編)",
            "date_published": "2020-07-15T17:19:39.000Z",
            "content_html": "<h1 id=\"はじめに\"><a class=\"markdownIt-Anchor\" href=\"#はじめに\">#</a> はじめに</h1>\n<p>MONET Technologies 株式会社、2020 年新卒入社の竹内です。</p>\n<p>この記事では、技術ブログ開始に当たって、静的サイトジェネレータ Hexo を導入した話です。</p>\n<p>全体構成のお話は<a href=\"/tech-blog/2020/07/14/%E6%8A%80%E8%A1%93%E3%83%96%E3%83%AD%E3%82%B0%E5%A7%8B%E3%82%81%E3%81%BE%E3%81%97%E3%81%9F(%E6%A7%8B%E6%88%90%E7%B7%A8)/\" title=\"技術ブログ始めました(構成編)\">技術ブログ始めました(構成編)</a>でお話しています。</p>\n<h2 id=\"docker使ってみます\"><a class=\"markdownIt-Anchor\" href=\"#docker使ってみます\">#</a> Docker 使ってみます</h2>\n<p>さて、それでは本題に入っていきましょう。<br>\n前提として、今回は Hexo 環境を Docker で構築します。<br>\nDocker 環境自体の構築については<a href=\"https://awesome-linus.com/2019/08/17/mac-docker-install/\" target=\"_blank\" rel=\"noopener\">こちら</a>を参照しました。<br>\n筆者は今回初めて Docker を使ってみているので、変なところがあれば指摘していただければと思います。</p>\n<p>流れとしては、</p>\n<ol>\n<li>執筆用 Docker イメージのビルド</li>\n<li>Docker コンテナの実行</li>\n</ol>\n<p>といったところです。</p>\n<h2 id=\"執筆用dockerイメージのビルド\"><a class=\"markdownIt-Anchor\" href=\"#執筆用dockerイメージのビルド\">#</a> 執筆用 Docker イメージのビルド</h2>\n<p>まず、執筆用の Docker イメージをビルドするところから始まります。<br>\nHexo 用の Docker イメージとして<a href=\"https://github.com/spurin/docker-hexo\" target=\"_blank\" rel=\"noopener\">こちら</a>を参考にしました。</p>\n<p>Dockerfile をお好みに記述したら、記述したファイルの存在するディレクトリ上で、</p>\n<pre><code>$ docker build ./ -t docker-hexo\n</code></pre>\n<p>とすれば Docker イメージがビルドされます。</p>\n<p>上記リンクで紹介した Docker ファイルでは</p>\n<ul>\n<li>Hexo 環境の導入</li>\n<li>デプロイ用 Git の導入 (SSH キーの配置も含めて)</li>\n</ul>\n<p>まで行ってくれるようになっています。</p>\n<p>今回は、</p>\n<ol>\n<li>ブログのソースリポジトリを Github にプッシュ</li>\n<li>Github Pages の公開用リポジトリを更新</li>\n</ol>\n<p>という流れを自動化したかったので、Git の hook 機能を使って Hexo のコマンドを紐づけるようにしています。</p>\n<p>具体的には、Hexo 用のデプロイコマンドを記述したファイル <code>pre_push</code>  を作り、</p>\n<pre class=\"line-numbers language-language-sh\" mdui-tooltip=\"{content: 'language-sh'}\"><code class=\"language-language-sh\">#!/bin/sh\n\necho \"---hooked hexo commands start---\"\n#hexo clean\nhexo deploy --generate\necho \"---hooked hexo commands end---\"\necho \"---If you get a \"\"hexo command does not exist\"\" error,\"\necho \"it's seems You' re not running git on Docker.---\"\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><code>~/.git/hooks/</code>  以下に配置するようにしています。</p>\n<p>今回は push する前という hook になっていますが、複数人で編集することを考えると、リモートリポジトリでのマージが終わったタイミングの方が良かったかもしれないと思っています。が、今回 Github がリモートリポジトリになっているので、リモートサーバ上での hook が実装できず、ひとまず push をトリガーにしています。<br>\nGitlab など自前で Git サーバを立てている際には、</p>\n<ol>\n<li>ブログを書く時にはまず執筆ブランチを切る</li>\n<li>ブログ執筆後、執筆ブランチ上の変更を push</li>\n<li>リモートリポジトリで執筆ブランチをマスターブランチにマージ</li>\n<li>マージ後の hook で公開用リポジトリへソースをデプロイ</li>\n</ol>\n<p>みたいな流れが安全そうです。</p>\n<h2 id=\"dockerコンテナの実行\"><a class=\"markdownIt-Anchor\" href=\"#dockerコンテナの実行\">#</a> Docker コンテナの実行</h2>\n<p>Docker イメージをビルドしたら、</p>\n<pre><code>$ docker create --name=hexo-domain.com \\\n-e HEXO_SERVER_PORT=4000 \\\n-e GIT_USER=&quot;hoge&quot; \\\n-e GIT_EMAIL=&quot;huga@sample.com&quot; \\\n-v /Path/To/Blog/app:/app \\\n-p 4000:4000 \\\ndocker-hexo\n\n$ docker start hexo-domain.com &amp;&amp; docker logs --follow hexo-domain.com\n</code></pre>\n<p>でコンテナを作成し開始します。<br>\nこれを行うことで、Docker コンテナ上の Hexo サーバが動き、</p>\n<p><a href=\"http://localhost:4000\" target=\"_blank\" rel=\"noopener\">http://localhost:4000</a></p>\n<p>を参照することでローカルなサイトのプレビューができるようになります。</p>\n<h1 id=\"まとめ\"><a class=\"markdownIt-Anchor\" href=\"#まとめ\">#</a> まとめ</h1>\n<p>Docker を使うことによって、複数人が使うブログの執筆環境をある程度簡易に構築することができました。<br>\n便利なツールが増える一方、依存関係などで導入が面倒になることもよくあるので、Docker のようなツールもうまく使えるとよりハッピーになりそうですね。</p>\n<p><s>時代の主流は SaaS でローカルに環境を整える場面も少なくなってきそうですが。。。</s></p>\n",
            "tags": [
                "hexo"
            ]
        },
        {
            "id": "https://monet-technologies-com.github.io/tech-blog/2020/07/14/%E6%8A%80%E8%A1%93%E3%83%96%E3%83%AD%E3%82%B0%E5%A7%8B%E3%82%81%E3%81%BE%E3%81%97%E3%81%9F(%E6%A7%8B%E6%88%90%E7%B7%A8)/",
            "url": "https://monet-technologies-com.github.io/tech-blog/2020/07/14/%E6%8A%80%E8%A1%93%E3%83%96%E3%83%AD%E3%82%B0%E5%A7%8B%E3%82%81%E3%81%BE%E3%81%97%E3%81%9F(%E6%A7%8B%E6%88%90%E7%B7%A8)/",
            "title": "技術ブログ始めました(構成編)",
            "date_published": "2020-07-14T05:09:45.000Z",
            "content_html": "<h1 id=\"はじめに\"><a class=\"markdownIt-Anchor\" href=\"#はじめに\">#</a> はじめに</h1>\n<p>MONET Technologies 株式会社、2020 年新卒入社の竹内です。</p>\n<p>この度、弊社でも社員の技術力向上 &amp; アウトプットのために、技術ブログを開設する運びとなりました。</p>\n<p>記念すべき 1 回目の記事は、この技術ブログの立ち上げについて一通り書きます。</p>\n<h2 id=\"技術ブログの選定\"><a class=\"markdownIt-Anchor\" href=\"#技術ブログの選定\">#</a> 技術ブログの選定</h2>\n<p>技術ブログを作成するに当たって考えたのは、</p>\n<ol>\n<li>サーバの維持コスト</li>\n<li>記事の管理コスト</li>\n<li>執筆環境</li>\n</ol>\n<p>の 3 点です。技術ブログを公開するというということは当然 Web サーバが必要になるわけですが、そこにコストやメンテナンスが必要になると継続するのが面倒です。なので、何か外部のサービスを使って公開したいという要求があります。<br>\nまた、ページを編集したら、編集履歴や差分まで管理したいです。<br>\n更に、執筆環境としては、普段コードを書いたりするエディタを使ってそのまま書きたいですよね。</p>\n<p>ということで、今回は静的サイトジェネレータ<a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\"> Hexo</a> と<a href=\"https://pages.github.com/\" target=\"_blank\" rel=\"noopener\"> Github Pages</a> を使って技術ブログを作ってみることにしました。ただ、今回用いる Hexo は Node.js で作られており、バージョン管理などが面倒です。そこで、今回は、</p>\n<ul>\n<li>生成環境：Docker 上の Hexo</li>\n<li>執筆環境：Visual Studio Code などの各自のエディタ</li>\n<li>公開環境：Github Pages</li>\n</ul>\n<p>という構成で全体を組みました (もちろん執筆環境はお好きなエディタを使ってください)。</p>\n<p>全体構成のイメージはこんな感じです。</p>\n<p><img src=\"2020-08-06T103219.png\" alt=\"2020-08-06T103219\"></p>\n<p>次回からそれぞれの環境について執筆していきます。</p>\n<h1 id=\"まとめ\"><a class=\"markdownIt-Anchor\" href=\"#まとめ\">#</a> まとめ</h1>\n<p>技術ブログを始めるので皆様ゆるゆるとお付き合いください！</p>\n",
            "tags": [
                "hexo",
                "vscode",
                "github",
                "docker"
            ]
        }
    ]
}